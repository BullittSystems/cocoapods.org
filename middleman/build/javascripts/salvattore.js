/*!
 * Salvattore 1.0.5 by @rnmp and @ppold
 * https://github.com/rnmp/salvattore
 */
(function(e,t){typeof define=="function"&&define.amd?define([],t):typeof exports=="object"?module.exports=t():e.salvattore=t()})(this,function(){window.matchMedia||(window.matchMedia=function(){"use strict";var e=window.styleMedia||window.media;if(!e){var t=document.createElement("style"),n=document.getElementsByTagName("script")[0],r=null;t.type="text/css",t.id="matchmediajs-test",n.parentNode.insertBefore(t,n),r="getComputedStyle"in window&&window.getComputedStyle(t,null)||t.currentStyle,e={matchMedium:function(e){var n="@media "+e+"{ #matchmediajs-test { width: 1px; } }";return t.styleSheet?t.styleSheet.cssText=n:t.textContent=n,r.width==="1px"}}}return function(t){return{matches:e.matchMedium(t||"all"),media:t||"all"}}}()),function(){"use strict";if(window.matchMedia&&window.matchMedia("all").addListener)return!1;var e=window.matchMedia,t=e("only all").matches,n=!1,r=0,i=[],s=function(t){clearTimeout(r),r=setTimeout(function(){for(var t=0,n=i.length;t<n;t++){var r=i[t].mql,s=i[t].listeners||[],o=e(r.media).matches;if(o!==r.matches){r.matches=o;for(var u=0,a=s.length;u<a;u++)s[u].call(window,r)}}},30)};window.matchMedia=function(r){var o=e(r),u=[],a=0;return o.addListener=function(e){if(!t)return;n||(n=!0,window.addEventListener("resize",s,!0)),a===0&&(a=i.push({mql:o,listeners:u})),u.push(e)},o.removeListener=function(e){for(var t=0,n=u.length;t<n;t++)u[t]===e&&u.splice(t,1)},o}}(),function(){"use strict";var e=0,t=["ms","moz","webkit","o"];for(var n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,n){var r=(new Date).getTime(),i=Math.max(0,16-(r-e)),s=window.setTimeout(function(){t(r+i)},i);return e=r+i,s}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),typeof window.CustomEvent!="function"&&function(){"use strict";function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:undefined};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}e.prototype=window.Event.prototype,window.CustomEvent=e}();var e=function(e,t,n){"use strict";var r={},i=[],s=[],o=[],u=function(e,t,n){e.dataset?e.dataset[t]=n:e.setAttribute("data-"+t,n);return};return r.obtainGridSettings=function(n){var r=e.getComputedStyle(n,":before"),i=r.getPropertyValue("content").slice(1,-1),s=i.match(/^\s*(\d+)(?:\s?\.(.+))?\s*$/),o=1,u=[];return s?(o=s[1],u=s[2],u=u?u.split("."):["column"]):(s=i.match(/^\s*\.(.+)\s+(\d+)\s*$/),s&&(u=s[1],o=s[2],o&&(o=o.split(".")))),{numberOfColumns:o,columnClasses:u}},r.addColumns=function(n,i){var s=r.obtainGridSettings(n),o=s.numberOfColumns,a=s.columnClasses,f=new Array(+o),l=t.createDocumentFragment(),c=o,h;while(c--!==0)h="[data-columns] > *:nth-child("+o+"n-"+c+")",f.push(i.querySelectorAll(h));f.forEach(function(n){var r=t.createElement("div"),i=t.createDocumentFragment();r.className=a.join(" "),Array.prototype.forEach.call(n,function(t){i.appendChild(t)}),r.appendChild(i),l.appendChild(r)}),n.appendChild(l),u(n,"columns",o)},r.removeColumns=function(r){var i=t.createRange();i.selectNodeContents(r);var s=Array.prototype.filter.call(i.extractContents().childNodes,function(n){return n instanceof e.HTMLElement}),o=s.length,a=s[0].childNodes.length,f=new Array(a*o);Array.prototype.forEach.call(s,function(t,n){Array.prototype.forEach.call(t.children,function(t,r){f[r*o+n]=t})});var l=t.createElement("div");return u(l,"columns",0),f.filter(function(t){return!!t}).forEach(function(t){l.appendChild(t)}),l},r.recreateColumns=function(n){e.requestAnimationFrame(function(){r.addColumns(n,r.removeColumns(n));var t=new CustomEvent("columnsChange");n.dispatchEvent(t)})},r.mediaQueryChange=function(t){t.matches&&Array.prototype.forEach.call(i,r.recreateColumns)},r.getCSSRules=function(t){var n;try{n=t.sheet.cssRules||t.sheet.rules}catch(r){return[]}return n||[]},r.getStylesheets=function(){return Array.prototype.concat.call(Array.prototype.slice.call(t.querySelectorAll("style[type='text/css']")),Array.prototype.slice.call(t.querySelectorAll("link[rel='stylesheet']")))},r.mediaRuleHasColumnsSelector=function(t){var n,r;try{n=t.length}catch(i){n=0}while(n--){r=t[n];if(r.selectorText&&r.selectorText.match(/\[data-columns\](.*)::?before$/))return!0}return!1},r.scanMediaQueries=function(){var n=[];if(!e.matchMedia)return;r.getStylesheets().forEach(function(t){Array.prototype.forEach.call(r.getCSSRules(t),function(t){t.media&&t.cssRules&&r.mediaRuleHasColumnsSelector(t.cssRules)&&n.push(t)})});var i=s.filter(function(e){return n.indexOf(e)===-1});o.filter(function(e){return i.indexOf(e.rule)!==-1}).forEach(function(e){e.mql.removeListener(r.mediaQueryChange)}),o=o.filter(function(e){return i.indexOf(e.rule)===-1}),n.filter(function(e){return s.indexOf(e)==-1}).forEach(function(t){var n=e.matchMedia(t.media.mediaText);n.addListener(r.mediaQueryChange),o.push({rule:t,mql:n})}),s.length=0,s=n},r.rescanMediaQueries=function(){r.scanMediaQueries(),Array.prototype.forEach.call(i,r.recreateColumns)},r.nextElementColumnIndex=function(t,n){var r=t.children,i=r.length,s=0,o,u,a,f=0;for(a=0;a<i;a++)o=r[a],u=o.children.length+(n[a].children||n[a].childNodes).length,s===0&&(s=u),u<s&&(f=a,s=u);return f},r.createFragmentsList=function(n){var r=new Array(n),i=0;while(i!==n)r[i]=t.createDocumentFragment(),i++;return r},r.appendElements=function(t,n){var i=t.children,s=i.length,o=r.createFragmentsList(s);Array.prototype.forEach.call(n,function(n){var i=r.nextElementColumnIndex(t,o);o[i].appendChild(n)}),Array.prototype.forEach.call(i,function(t,n){t.appendChild(o[n])})},r.prependElements=function(n,i){var s=n.children,o=s.length,u=r.createFragmentsList(o),a=o-1;i.forEach(function(t){var n=u[a];n.insertBefore(t,n.firstChild),a===0?a=o-1:a--}),Array.prototype.forEach.call(s,function(t,n){t.insertBefore(u[n],t.firstChild)});var f=t.createDocumentFragment(),l=i.length%o;while(l--!==0)f.appendChild(n.lastChild);n.insertBefore(f,n.firstChild)},r.registerGrid=function(s){if(e.getComputedStyle(s).display==="none")return;var o=t.createRange();o.selectNodeContents(s);var a=t.createElement("div");a.appendChild(o.extractContents()),u(a,"columns",0),r.addColumns(s,a),i.push(s)},r.init=function(){var n=t.createElement("style");n.innerHTML="[data-columns]::before{visibility:hidden;position:absolute;font-size:1px;}",t.head.appendChild(n);var i=t.querySelectorAll("[data-columns]");Array.prototype.forEach.call(i,r.registerGrid),r.scanMediaQueries()},r.init(),{appendElements:r.appendElements,prependElements:r.prependElements,registerGrid:r.registerGrid,recreateColumns:r.recreateColumns,rescanMediaQueries:r.rescanMediaQueries,append_elements:r.appendElements,prepend_elements:r.prependElements,register_grid:r.registerGrid,recreate_columns:r.recreateColumns,rescan_media_queries:r.rescanMediaQueries}}(window,window.document);return e});